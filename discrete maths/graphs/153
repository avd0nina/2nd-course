Чтобы граф решётки был гамильтоновым, в нем должен существовать гамильтонов цикл, проходящий через каждую вершину графа ровно один раз и возвращающийся в начальную вершину. Это зависит от четности параметров n и m.
Рассмотрим всевозможные случаи.
1. n и m четные
Количество вершин V = n $\times$ m - четное
В этом случае мы можем построить гамильтонов цикл, чередуя ходы по горизонтали и вертикали. Например, начиная с одной из угловых вершин, можно заполнять сетку зигзагообразно, переходя от одной строки к следующей или от одного столбца к следующему, таким образом, что цикл вернётся в начальную точку.
Пример: n = 4, m = 4
(1, 1) -> (1, 2) -> (1, 3) -> (1, 4) -> (2, 4) -> (2, 3) -> (2, 2) -> (2, 1) -> (3, 1) -> (3, 2) -> (3, 3) -> (3, 4) -> (4, 4) -> (4, 3) -> (4, 2) -> (4, 1) -> (1, 1)
Этот путь проходит через все вершины ровно один раз и возвращается в начальную вершину. Значит, G - гамильтонов.
2. Пусть у нас есть решетка n $\times$ m, где n - столбцы, m - строки.
Пример 1: n = 4, m = 3
(1, 1) -> (1, 2) -> (1, 3) -> (1, 4) -> (2, 4) -> (3, 4) -> (3, 3) -> (2, 3) -> (2, 2) -> (3, 2) -> (3, 1) -> (2, 1) -> (1, 1)
Пример 2: n = 3, m = 4
(1, 1) -> (1, 2) -> (1, 3) -> (2, 3) -> (2, 2) -> (3, 2) -> (3, 3) -> (4, 3) -> (4, 2) -> (4, 1) -> (3, 1) -> (2, 1) -> (1, 1)
Опишем для общего случая.
Если у нас четное количество столбцов и нечетное количество строк.
Стартуем с клетки (1, 1) (в левом верхнем углу). Идем вдоль первой строки слева направо. Проходим все клетки в строке 1 от (1, 1) до (1, n). Спускаемся по крайнему правому столбцу вниз. Переходим в строку 2 и спускаемся вниз до строки m, до клетки (m, n). Зигзагами заполняем оставшиеся строки и столбцы. Из позиции (m, n) перемещаемся в (m, n - 1), затем в (2, n - 1), затем в (m, n - 2) и т.д. После нашего зигзагообразного обхода из клетки (1, m) поднимаемся вверх до клетки (1, 1).
Если у нас нечетное количество столбцов и четное количество строк.
Стартуем с клетки (1, 1) (в левом верхнем углу). Идем вдоль первой строки слева направо. Проходим все клетки в строке 1 от (1, 1) до (1, n). Спускаемся на одну строку вниз, в клетку (2, n). Начинаем зигзагообразный обход. Из клетки (2, n) идем в клетку (2, 2). Спускаемся на одну строку вниз в клетку (3, 2). Идем вправо до клетки (3, n). И продолжаем так до клетки (m, n), из которой идем влево до клетки (m, 1) и поднимаемся вверх до (1, 1).
3. n и m нечетные
Количество вершин V = n $\times$ m - нечетное
Граф является двудольным с нечетным числом вершин. В двудольном графе гамильтонов цикл должен иметь четную длину, так как он чередует вершины из двух долей. Если общее число вершин нечетное, то длина потенциального гамильтонова цикла будет тоже нечетной, что невозможно.
